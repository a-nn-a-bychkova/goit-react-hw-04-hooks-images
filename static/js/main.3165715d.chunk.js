(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{13:function(e,t,n){e.exports={item:"ImageGalleryItem_item__1N3tB",image:"ImageGalleryItem_image__3KRpq"}},14:function(e,t,n){e.exports={Overlay:"Modal_Overlay__3Y2Ss",Modal:"Modal_Modal__1CKUJ"}},21:function(e,t,n){e.exports={Searchbar:"Searchbar_Searchbar__1cRYZ"}},22:function(e,t,n){e.exports={ImageGallery:"ImageGallery_ImageGallery__3o8UC"}},26:function(e,t,n){},34:function(e,t,n){},58:function(e,t,n){e.exports={Button:"Button_Button__to_Ql"}},6:function(e,t,n){e.exports={SearchForm:"Searchform_SearchForm__22KqX",button:"Searchform_button__AbRmc",label:"Searchform_label__31aQ2",input:"Searchform_input__3-vHI"}},81:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(0),r=n.n(a),o=n(4),i=n.n(o),s=(n(34),n(3)),u=n(12),l=(n(35),n(6)),j=n.n(l);function b(e){var t=Object(a.useState)(""),n=Object(s.a)(t,2),r=n[0],o=n[1];return Object(c.jsxs)("form",{onSubmit:function(t){var n=e.onSubmit;if(t.preventDefault(),""===r.trim())return alert("The request is empty");n(r),o("")},className:j.a.SearchForm,children:[Object(c.jsx)("button",{type:"submit",className:j.a.button,children:Object(c.jsx)("span",{className:j.a.label,children:"Search"})}),Object(c.jsx)("input",{className:j.a.input,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:r,onChange:function(e){o(e.currentTarget.value.toLowerCase())}})]})}var h=n(21),m=n.n(h),d=function(e){var t=e.children;return Object(c.jsx)("header",{className:m.a.Searchbar,children:t})},f=n(15),O=n(22),g=n.n(O);var p={fetchImage:function(e,t){return fetch("https://pixabay.com/api/?q=".concat(e,"&page=").concat(t,"&key=19110749-e340c63922b3f8a4d502270f7&image_type=photo&orientation=horizontal&per_page=12")).then((function(e){return e.json()}))}},v=n(13),x=n.n(v),_=function(e){var t=e.smallPicture,n=e.largePicture,a=e.alt;return Object(c.jsx)("li",{className:x.a.item,children:Object(c.jsx)("img",{src:t,alt:a,className:x.a.image,"data-url":n})})},S=n(23),y=n(24),C=n(28),k=n(27),w=n(25),I=n.n(w),N=(n(57),n(26)),F=n.n(N),E=function(e){Object(C.a)(n,e);var t=Object(k.a)(n);function n(){return Object(S.a)(this,n),t.apply(this,arguments)}return Object(y.a)(n,[{key:"render",value:function(){return Object(c.jsx)("div",{className:F.a.div,children:Object(c.jsx)(I.a,{type:"ThreeDots",color:"#00BFFF",height:80,width:80})})}}]),n}(a.Component),L=(n(58),function(e){var t=e.onClick;return Object(c.jsx)("button",{type:"button",onClick:t,children:"Load more"})}),B="idle",G="pending",M="resolved",P="rejected";function T(e){var t=Object(a.useState)([]),n=Object(s.a)(t,2),r=n[0],o=n[1],i=Object(a.useState)(null),u=Object(s.a)(i,2),l=u[0],j=u[1],b=Object(a.useState)(B),h=Object(s.a)(b,2),m=h[0],d=h[1],O=Object(a.useState)(1),v=Object(s.a)(O,2),x=v[0],S=v[1],y=e.searchQuery;Object(a.useEffect)((function(){""!==y&&(o([]),j(null),d(B),S(1),C(y,1))}),[y]),Object(a.useEffect)((function(){1!==x&&C(y,x)}),[x]);var C=function(e,t){d(G),p.fetchImage(e,t).then((function(n){return n.hits.length>0?(o((function(e){return[].concat(Object(f.a)(e),Object(f.a)(n.hits))})),d(M),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})):0===n.hits.length||t>1?d(M):(j("\u043f\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0443 ".concat(e," \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e")),d(P))})).catch((function(e){return j(e),d(P)}))};return"idle"===m?Object(c.jsx)(c.Fragment,{}):"pending"===m||"resolved"===m?Object(c.jsxs)("div",{children:[Object(c.jsx)("ul",{className:g.a.ImageGallery,onClick:function(t){"IMG"===t.target.tagName&&e.onClick(t.target.dataset.url,t.target.alt)},children:r.map((function(e,t){return Object(c.jsx)(_,{smallPicture:e.webformatURL,largePicture:e.largeImageURL,alt:e.tags},"".concat(e.id).concat(t))}))}),"resolved"===m&&Object(c.jsx)(L,{onClick:function(e){S((function(e){return e+1}))}}),"pending"===m&&Object(c.jsx)(E,{})]}):"rejected"===m?Object(c.jsx)("h1",{children:l}):void 0}var q=n(14),R=n.n(q),Q=(n(59),document.querySelector("#modal-root"));function U(e){Object(a.useEffect)((function(){return window.addEventListener("keydown",t),function(){window.removeEventListener("keydown",t)}}),[]);var t=function(t){"Escape"===t.code&&e.onClose()},n=e.src,r=e.alt;return Object(o.createPortal)(Object(c.jsx)("div",{className:R.a.Overlay,onClick:function(t){t.currentTarget===t.target&&e.onClose()},children:Object(c.jsx)("div",{className:R.a.Modal,children:Object(c.jsx)("img",{src:n,alt:r})})}),Q)}var D=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(!1),i=Object(s.a)(o,2),l=i[0],j=i[1],h=Object(a.useState)({src:"",alt:""}),m=Object(s.a)(h,2),f=m[0],O=m[1],g=function(){j((function(e){return!e}))};return Object(c.jsxs)("div",{children:[Object(c.jsx)(d,{children:Object(c.jsx)(b,{onSubmit:function(e){r(e)}})}),Object(c.jsx)(T,{searchQuery:n,onClick:function(e,t){O({src:e,alt:t}),g()}}),l&&Object(c.jsx)(U,{src:f.src,alt:f.alt,onClose:g}),Object(c.jsx)(u.a,{})]})},J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,84)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),c(e),a(e),r(e),o(e)}))};i.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(D,{})}),document.getElementById("root")),J()}},[[81,1,2]]]);
//# sourceMappingURL=main.3165715d.chunk.js.map